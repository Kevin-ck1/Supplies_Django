{% extends "company/layout.html" %}

{% block body %}

<div class="">
    <div class="w-100 p-4 d-flex justify-content-center pb-4">
        <div style="width: 26rem;">
            <!-- Pills navs -->
            <ul class="nav nav-pills nav-justified mb-3" id="ex1" role="tablist">
                <li class="nav-item" role="presentation">
                    <a class="nav-link active" id="tab-login" href="{% url 'company:login' %}" role="tab">Login</a>
                </li>
                <li class="nav-item" role="presentation">
                    <a class="nav-link reg-link" id="tab-register" href="#pills-register" role="tab">Register</a>
                </li>
            </ul>
            <!-- Pills navs -->

            <!-- Error Message -->
                {% if message %}
                    <div>{{ message }}</div>
                {% endif %}

            <!-- Pills content -->
            <div class="tab-content">
                <div class="tab-pane fade show active" id="pills-login" role="tabpanel">
                    <form action="" method="post">
                        {% csrf_token %}
                        <p class="text-center mb-3">Sign in with:</p>
        
                        <!-- Username input -->
                        <div class="form-outline mb-4">
                            <input type="text" id="loginName" class="form-control" name="username" required/>
                            <label class="form-label" for="loginName">Username</label>
                        </div>
                
                        <!-- Password input -->
                        <div class="form-outline mb-4">
                            <input type="password" id="loginPassword" class="form-control" name="password" required/>
                            <label class="form-label" for="loginPassword">Password</label>
                        </div>
                
                        <!-- 2 column grid layout -->
                        <div class="row mb-4">
                            <!-- Below is code for Remember me -->
                            <!-- <div class="col-md-6 d-flex justify-content-center">
                                Checkbox
                                <div class="form-check mb-3 mb-md-0">
                                    <input class="form-check-input" type="checkbox" value="" id="loginCheck" checked />
                                    <label class="form-check-label" for="loginCheck"> Remember me </label>
                                </div>
                            </div> -->
                    
                            <div class="col-md-6 d-flex justify-content-center">
                                <!-- Simple link -->
                                <!-- <a href="#!">Forgot password?</a> -->
                            </div>
                            
                        </div>
                        <input type="hidden" value="{% if request.REQUEST.next %}{{ request.REQUEST.next }}{% else %}{% if request.META.HTTP_REFERER %}{{ request.META.HTTP_REFERER }}{% else %}/{% endif %}{% endif %}" name="next" />
                        <!-- Submit button -->
                        <button type="submit" class="btn btn-primary btn-block mb-4" style="width: 100%">Sign in</button>
                
                        <!-- Register buttons -->
                        <div class="text-center">
                            <p>Not a member? <a href="#!" class="reg-link">Register</a></p>
                        </div>
                    </form>
                </div>

                <div class="tab-pane fade" id="pills-register" role="tabpanel">
                    <form action="{% url 'company:register' %}" method="post">
                        {% csrf_token %}
                        <div class="text-center mb-3">
                            <p>Sign up with:</p>
                        </div>
                
                        <!-- Username input -->
                        <div class="form-outline mb-4">
                            <label class="form-label" for="registerUsername">Username</label>
                            <input type="text" id="registerUsername" class="form-control" name="username" placeholder="Username" />
                        </div>
                
                        <!-- Email input -->
                        <div class="form-outline mb-4">
                            <label class="form-label" for="registerEmail">Email</label>
                            <input type="email" id="registerEmail" class="form-control" name="email" placeholder="Email Address" />
                        </div>
                
                        <!-- Password input -->
                        <div class="form-outline mb-4">
                            <label class="form-label" for="registerPassword">Password</label>
                            <input type="password" id="registerPassword" class="form-control" name="password" placeholder="Password"/>
                        </div>
                
                        <!-- Repeat Password input -->
                        <div class="form-outline mb-4">
                            <label class="form-label" for="registerRepeatPassword">Repeat password</label>
                            <input type="password" id="registerRepeatPassword" class="form-control" name="confirmation" placeholder="Confirm Password" /> 
                        </div>
                
                        <!-- Submit button -->
                        <button type="submit" class="btn btn-primary btn-block mb-3" style="width: 100%">Sign in</button>
                    </form>
                </div>
            </div>
            <!-- Pills content -->
        </div>
    </div>
</div>

{% endblock %}

{% load static %}

{% block scripttag%}
<script>
    //Openning the Registration form
    var reg_links = document.querySelectorAll('.reg-link')
    var b = document.querySelector('.tab-content').children
    var nav_links = document.querySelectorAll('ul.nav-pills .nav-link')

    reg_links.forEach((a)=>{
        a.addEventListener('click', ()=>{
            //Displaying the Reg Div
            b[0].classList.remove("show", "active")
            b[1].classList.add("show", "active")

            //Changing the Buttons
            nav_links[0].classList.remove("active")
            nav_links[1].classList.add("active")
        })
    })

    //Openning the Login form from the reg form
    var login_link = document.querySelector('#tab-login').addEventListener('click', ()=>{
            b[0].classList.add("show", "active")
            b[1].classList.remove("show", "active")

            //Changing the Buttons
            nav_links[1].classList.remove("active")
            nav_links[0].classList.add("active")
    })
</script>
{%endblock%}